<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trincomalee Disaster Response Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#059669', // Emerald Green
                        'secondary': '#1d4ed8', // Blue
                        'accent': '#f59e0b', // Amber
                        'vulnerable-infants': '#38bdf8', // Sky Blue
                        'vulnerable-under5': '#0ea5e9', // Light Blue
                        'vulnerable-pregnant': '#ec4899', // Pink
                        'background-light': '#f9fafb',
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom styles for visualization and aesthetics */
        .data-bar, .stack-segment {
            transition: width 0.8s ease-out;
            height: 100%;
        }
        .table-container {
            max-height: 80vh; /* Limit height for responsiveness */
            overflow-y: auto;
        }
        /* Custom icon SVG for the main header */
        /* Shield/Cross Icon Size */
        .icon-svg {
            width: 80px; 
            height: 80px;
            color: #ef4444; /* Red for the cross */
            fill: #ffffff; /* White background for the shield */
            stroke: none;
        }
        
        /* Mobile optimization for labels: not strictly necessary for pie charts, but kept for consistency */
        @media (max-width: 640px) {
            .moh-label {
                width: 100%;
                text-align: left;
                margin-bottom: 0.25rem;
            }
            .viz-item {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body class="bg-background-light font-sans p-4 sm:p-6 lg:p-10">

    <div id="app" class="max-w-7xl mx-auto space-y-12">

        <header class="text-center">
            <div class="bg-primary shadow-2xl rounded-xl p-6 sm:p-10 text-white transform hover:scale-[1.01] transition duration-300">
                
                <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight mb-2 text-white">
                    Trincomalee District Disaster Response Dashboard
                </h1>
                <p class="text-xl sm:text-2xl font-semibold opacity-90 text-accent">
                    Real-time status of welfare camps
                </p>

                <div class="mt-4 pt-4 border-t border-white border-opacity-30">
                    <p class="text-sm sm:text-lg font-medium text-white">
                        Health Information Management Unit | Office of Regional Director of Health Services (RDHS)
                    </p>
                    <p class="text-lg font-light text-secondary bg-white inline-block px-3 py-1 rounded-full mt-1">
                        Trincomalee
                    </p>
                </div>

                <div class="mt-6 flex justify-center">
                    <div id="data-date" class="inline-flex items-center text-sm sm:text-lg font-bold bg-white text-primary rounded-full px-6 py-3 shadow-2xl border-2 border-accent transform hover:scale-[1.05] transition duration-300 cursor-pointer">
                        <svg class="w-5 h-5 mr-3 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 12h-2v2h2v-2zm-4 0h-2v2h2v-2zm-4 0H7v2h2v-2zm-3-7h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm14 2H4v3h14V7z"/></svg>
                        Data Last Updated: **December 3rd, 2025  21.00**
                    </div>
                </div>
            </div>
        </header>

        <section class="space-y-6">
            <h2 class="text-3xl font-bold text-gray-800 border-b-2 border-primary pb-2 flex items-center">
                <span class="mr-2">üìä</span> Situation Overview
            </h2>
            <p class="text-gray-600 text-lg">
                This dashboard provides a concise summary of the welfare camp status across the Trincomalee District, based on data received from various Medical Officer of Health (MOH) areas on December 3rd, 2025.
            </p>

            <div id="kpi-cards" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6">
                </div>
        </section>

        <section class="space-y-6">
            <h2 class="text-3xl font-bold text-gray-800 border-b-2 border-primary pb-2 flex items-center">
                <span class="mr-2">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span> Affected Population (People) Distribution
            </h2>
            <div id="moh-people-visualization" class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                </div>
        </section>
        
        <section class="space-y-6">
            <h2 class="text-3xl font-bold text-gray-800 border-b-2 border-accent pb-2 flex items-center">
                <span class="mr-2">üöª</span> Gender Breakdown
            </h2>
            <div id="gender-distribution" class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                </div>
        </section>

        <section class="space-y-6">
            <h2 class="text-3xl font-bold text-gray-800 border-b-2 border-secondary pb-2 flex items-center">
                <span class="mr-2">üö®</span> Vulnerable Population Distribution by MOH Area
            </h2>
            
            <p class="text-gray-600 text-lg font-semibold">Distribution of each vulnerable group across the Medical Officer of Health (MOH) areas.</p>

            <div id="vulnerable-pie-charts" class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 text-vulnerable-infants">üë∂ Infants (< 1 year) Distribution</h3>
                    <div id="vulnerable-infants-chart"></div>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 text-vulnerable-under5">üßí Children Under 5 Distribution</h3>
                    <div id="vulnerable-under5-chart"></div>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 text-vulnerable-pregnant">ü§∞ Pregnant Mothers Distribution</h3>
                    <div id="vulnerable-pregnant-chart"></div>
                </div>
            </div>
        </section>

        <section class="space-y-6">
            <h2 class="text-3xl font-bold text-gray-800 border-b-2 border-gray-400 pb-2 flex items-center">
                <span class="mr-2">üìã</span> Detailed Welfare Camp Data
            </h2>
            
            <div class="table-container bg-white rounded-xl shadow-2xl">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="sticky top-0 bg-primary text-white shadow-md">
                        <tr>
                            <th class="px-3 py-3 text-left text-sm font-semibold uppercase tracking-wider rounded-tl-xl">MOH Area</th>
                            <th class="px-3 py-3 text-right text-sm font-semibold uppercase tracking-wider">Families</th>
                            <th class="px-3 py-3 text-right text-sm font-semibold uppercase tracking-wider">People</th>
                            <th class="px-3 py-3 text-right text-sm font-semibold uppercase tracking-wider hidden sm:table-cell">Male</th>
                            <th class="px-3 py-3 text-right text-sm font-semibold uppercase tracking-wider hidden sm:table-cell">Female</th>
                            <th class="px-3 py-3 text-right text-sm font-semibold uppercase tracking-wider bg-vulnerable-infants/80">Infants</th>
                            <th class="px-3 py-3 text-right text-sm font-semibold uppercase tracking-wider bg-vulnerable-under5/80">Under 5</th>
                            <th class="px-3 py-3 text-right text-sm font-semibold uppercase tracking-wider bg-vulnerable-pregnant/80 rounded-tr-xl">Pregnant Mothers</th>
                        </tr>
                    </thead>
                    <tbody id="data-table-body" class="bg-white divide-y divide-gray-100">
                        </tbody>
                    <tfoot id="data-table-footer">
                        </tfoot>
                </table>
            </div>
        </section>

        <section class="mt-12 p-6 bg-red-100 rounded-xl border-4 border-red-500 shadow-2xl transform hover:scale-[1.01] transition duration-300">
            <div class="flex items-center justify-center mb-3">
                <svg class="w-8 h-8 text-red-600 mr-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                <h3 class="text-2xl font-extrabold text-red-700 tracking-wide">
                    OFFICIAL DATA CONFIRMATION REQUIRED
                </h3>
            </div>
            
            <p class="text-xl text-red-800 text-center mb-5 font-semibold italic border-y border-red-300 py-3">
                This dashboard is a **temporary field tool** to help health workers quickly understand the ground situation.
            </p>
            <p class="text-base text-gray-800 text-center">
                For **official use or distribution**, you must obtain formal confirmation from the **RDHS office** via the contact details below.
            </p>
            
            <div class="mt-5 pt-3 border-t border-red-300 text-sm text-center">
                <p class="font-bold text-lg text-primary">Health Information Management Unit</p>
                <p class="text-gray-700">Regional Director of Health Services, 120 Court Rd, Trincomalee</p>
                <div class="flex flex-wrap items-center justify-center space-x-4 mt-2 font-bold text-gray-800">
                    <span>üìû 026 2222263</span>
                    <span>| üì† 026 2220854</span>
                    <span>| ‚úâÔ∏è trincomoinfo@gmail.com</span>
                </div>
            </div>
        </section>


        <footer class="text-center text-sm text-gray-500 pt-6">
            <p>&copy; 2025 Trincomalee RDHS Health Information Management Unit. All Rights Reserved.</p>
        </footer>

    </div>

    <script>
        const disasterData = [
            { moh: "Kuchaveli", families: 2, people: 10, male: 5, female: 5, infants: 0, under5: 2, pregnant: 0, deaths: 0, missing: 0 },
            { moh: "Gomarankadawela", families: 10, people: 0, male: 0, female: 0, infants: 0, under5: 0, pregnant: 0, deaths: 0, missing: 0 },
            { moh: "Padavisripura", families: 58, people: 122, male: 0, female: 0, infants: 0, under5: 0, pregnant: 0, deaths: 0, missing: 0 },
            { moh: "Uppuveli", families: 5, people: 26, male: 10, female: 14, infants: 0, under5: 0, pregnant: 0, deaths: 0, missing: 0 },
            { moh: "Trincomalee", families: 5, people: 5, male: 0, female: 0, infants: 0, under5: 0, pregnant: 0, deaths: 0, missing: 0 },
            { moh: "Kanthale", families: 139, people: 448, male: 218, female: 230, infants: 2, under5: 30, pregnant: 2, deaths: 0, missing: 0 },
            { moh: "Kurunjakerni", families: 299, people: 1048, male: 277, female: 278, infants: 6, under5: 35, pregnant: 5, deaths: 0, missing: 0 },
            { moh: "Seruwila", families: 536, people: 1564, male: 739, female: 825, infants: 10, under5: 88, pregnant: 4, deaths: 0, missing: 0 },
            { moh: "Echilampathu", families: 620, people: 1795, male: 518, female: 555, infants: 0, under5: 25, pregnant: 27, deaths: 0, missing: 0 },
            { moh: "Kinniya", families: 398, people: 1168, male: 544, female: 624, infants: 23, under5: 114, pregnant: 11, deaths: 0, missing: 0 },
            { moh: "Muthur", families: 3046, people: 9348, male: 4299, female: 4563, infants: 12, under5: 743, pregnant: 52, deaths: 0, missing: 0 },
            { moh: "Thambalagamam", families: 0, people: 0, male: 0, female: 0, infants: 0, under5: 0, pregnant: 0, deaths: 0, missing: 0 }
        ];

        // Custom color palette for pie charts
        const PIE_COLORS = [
            '#ef4444', // Red (Muthur - largest)
            '#3b82f6', // Blue
            '#10b981', // Emerald
            '#f97316', // Orange
            '#6366f1', // Indigo
            '#4b5563' // Gray-600 (for 'Other MOH Areas')
        ];
        const GENDER_COLORS = {
            male: '#3b82f6', // Blue for Male
            female: '#ec4899' // Pink for Female
        };
        const TOP_N_SLICES = 5;

        // 1. Calculate Totals
        const totals = disasterData.reduce((acc, curr) => {
            acc.families += curr.families;
            acc.people += curr.people;
            acc.male += curr.male;
            acc.female += curr.female;
            acc.infants += curr.infants;
            acc.under5 += curr.under5;
            acc.pregnant += curr.pregnant;
            acc.deaths += curr.deaths;
            acc.missing += curr.missing;
            return acc;
        }, { families: 0, people: 0, male: 0, female: 0, infants: 0, under5: 0, pregnant: 0, deaths: 0, missing: 0 });


        // === VISUALIZATION FUNCTIONS ===

        // Helper function for rendering a Pie Chart using SVG (Used for MOH Distribution for People, Gender, and now Vulnerable groups)
        const renderPieChart = (containerId, dataKey, chartTitle) => {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            // 1. Prepare and Aggregate Data
            const data = disasterData.map(d => ({
                moh: d.moh,
                value: d[dataKey]
            })).filter(d => d.value > 0)
              .sort((a, b) => b.value - a.value); // Sort descending

            if (data.length === 0) {
                container.innerHTML = `<p class="text-center w-full text-gray-500">No data available for ${chartTitle}.</p>`;
                return;
            }

            const totalValue = data.reduce((sum, d) => sum + d.value, 0);
            
            // Grouping: Take top N and combine the rest into 'Other'
            let slices = data.slice(0, TOP_N_SLICES);
            const otherSlices = data.slice(TOP_N_SLICES);

            if (otherSlices.length > 0) {
                const otherValue = otherSlices.reduce((sum, d) => sum + d.value, 0);
                slices.push({ moh: "Other MOH Areas", value: otherValue });
            }
            
            // 2. Generate Pie Slices (SVG)
            const svgSize = 300;
            const radius = svgSize / 2 - 10; // Minus 10 for padding
            const center = svgSize / 2;
            let startAngle = 0;
            
            // SVG and Labels Container Setup
            const chartArea = document.createElement('div');
            // Use flex-col on mobile and flex-row on desktop for responsive layout
            chartArea.className = "flex flex-col lg:flex-row items-center justify-center p-2 space-y-4 lg:space-y-0 lg:space-x-12";
            
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("width", svgSize);
            svg.setAttribute("height", svgSize);
            svg.setAttribute("viewBox", `0 0 ${svgSize} ${svgSize}`);
            svg.className = "flex-shrink-0 shadow-xl rounded-full border border-gray-200";

            const labelContainer = document.createElement('div');
            // Adjusted container for better display in the 3-column grid
            labelContainer.className = "flex flex-col space-y-2 text-sm max-w-full w-full lg:w-auto mt-4 lg:mt-0"; 
            
            slices.forEach((slice, index) => {
                const percentage = (slice.value / totalValue);
                const angle = percentage * 360;
                const endAngle = startAngle + angle;
                
                // Skip if slice is too small to draw (less than 0.5 degree)
                if (angle < 0.5) {
                    startAngle = endAngle;
                    return;
                }

                // Function to convert polar to cartesian coordinates
                const getCoords = (angle) => {
                    const radians = (angle - 90) * (Math.PI / 180);
                    return [
                        center + (radius * Math.cos(radians)),
                        center + (radius * Math.sin(radians))
                    ];
                };
                
                const [x1, y1] = getCoords(startAngle);
                const [x2, y2] = getCoords(endAngle);

                const largeArcFlag = angle > 180 ? 1 : 0;
                const color = PIE_COLORS[index % PIE_COLORS.length];
                
                // Define the SVG path (slice)
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                path.setAttribute("d", `M ${center},${center} L ${x1},${y1} A ${radius},${radius} 0 ${largeArcFlag},1 ${x2},${y2} Z`);
                path.setAttribute("fill", color);
                path.setAttribute("stroke", "white");
                path.setAttribute("stroke-width", "1");
                path.setAttribute("title", `${slice.moh}: ${slice.value.toLocaleString()} (${(percentage * 100).toFixed(1)}%)`);
                path.style.transition = 'transform 0.3s';
                
                // Add hover effect to slightly pull the slice out
                path.addEventListener('mouseenter', () => path.style.transform = 'scale(1.03)');
                path.addEventListener('mouseleave', () => path.style.transform = 'scale(1)');
                
                svg.appendChild(path);
                
                // 3. Generate Labels
                const percentageText = `${(percentage * 100).toFixed(1)}%`;
                const labelText = `${slice.moh}: **${slice.value.toLocaleString()}** (${percentageText})`;
                const labelHtml = `
                    <div class="flex items-center p-2 rounded-lg transition duration-150 hover:bg-gray-100/50" title="${slice.moh}">
                        <span class="w-4 h-4 rounded-full mr-3 flex-shrink-0 shadow-sm" style="background-color: ${color};"></span>
                        <span class="text-gray-800 font-medium">${labelText}</span>
                    </div>
                `;
                labelContainer.innerHTML += labelHtml;

                startAngle = endAngle;
            });

            chartArea.appendChild(svg);
            chartArea.appendChild(labelContainer);
            container.appendChild(chartArea);

            // Add a note about the grouping
            if (otherSlices.length > 0) {
                const note = document.createElement('p');
                note.className = "text-center text-xs text-gray-500 mt-4 px-4 w-full";
                note.innerHTML = `Note: Smaller areas (constituting ${otherSlices.length} MOHs) are combined into 'Other MOH Areas' for a clearer visual distribution.`;
                container.appendChild(note);
            }
        };

        // Function for a simple Male vs. Female Pie Chart (from the total population)
        const renderGenderPieChart = (containerId) => {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            // Prepare data (simplified to just two slices)
            const data = [
                { label: "Male Affected", key: 'male', value: totals.male, color: GENDER_COLORS.male, icon: '‚ôÇÔ∏è' },
                { label: "Female Affected", key: 'female', value: totals.female, color: GENDER_COLORS.female, icon: '‚ôÄÔ∏è' }
            ].filter(d => d.value > 0);

            if (data.length === 0) {
                container.innerHTML = `<p class="text-center w-full text-gray-500">No gender data reported.</p>`;
                return;
            }

            const totalValue = data.reduce((sum, d) => sum + d.value, 0);

            // SVG and Labels Container Setup
            const chartArea = document.createElement('div');
            chartArea.className = "flex flex-col md:flex-row items-center justify-center p-2 space-y-4 md:space-y-0 md:space-x-12";
            
            const svgSize = 300;
            const radius = svgSize / 2 - 10;
            const center = svgSize / 2;
            let startAngle = 0;

            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("width", svgSize);
            svg.setAttribute("height", svgSize);
            svg.setAttribute("viewBox", `0 0 ${svgSize} ${svgSize}`);
            svg.className = "flex-shrink-0 shadow-xl rounded-full border border-gray-200";

            const labelContainer = document.createElement('div');
            labelContainer.className = "flex flex-col space-y-2 text-base max-w-full md:max-w-sm w-full md:w-auto";
            
            data.forEach((slice, index) => {
                const percentage = (slice.value / totalValue);
                const angle = percentage * 360;
                const endAngle = startAngle + angle;
                
                // Skip if slice is too small
                if (angle < 0.5) {
                    startAngle = endAngle;
                    return;
                }

                const getCoords = (angle) => {
                    const radians = (angle - 90) * (Math.PI / 180);
                    return [
                        center + (radius * Math.cos(radians)),
                        center + (radius * Math.sin(radians))
                    ];
                };
                
                const [x1, y1] = getCoords(startAngle);
                const [x2, y2] = getCoords(endAngle);

                const largeArcFlag = angle > 180 ? 1 : 0;
                
                // Define the SVG path (slice)
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                path.setAttribute("d", `M ${center},${center} L ${x1},${y1} A ${radius},${radius} 0 ${largeArcFlag},1 ${x2},${y2} Z`);
                path.setAttribute("fill", slice.color);
                path.setAttribute("stroke", "white");
                path.setAttribute("stroke-width", "1");
                path.setAttribute("title", `${slice.label}: ${slice.value.toLocaleString()} (${(percentage * 100).toFixed(1)}%)`);
                path.style.transition = 'transform 0.3s';
                
                path.addEventListener('mouseenter', () => path.style.transform = 'scale(1.03)');
                path.addEventListener('mouseleave', () => path.style.transform = 'scale(1)');
                
                svg.appendChild(path);
                
                // Generate Labels
                const percentageText = `${(percentage * 100).toFixed(1)}%`;
                const labelText = `${slice.icon} **${slice.label.replace(' Affected', '')}:** ${slice.value.toLocaleString()} (${percentageText})`;
                const labelHtml = `
                    <div class="flex items-center p-2 rounded-lg transition duration-150 hover:bg-gray-100/50" title="${slice.label}">
                        <span class="w-4 h-4 rounded-full mr-3 flex-shrink-0 shadow-sm" style="background-color: ${slice.color};"></span>
                        <span class="text-gray-800 font-medium">${labelText}</span>
                    </div>
                `;
                labelContainer.innerHTML += labelHtml;

                startAngle = endAngle;
            });

            chartArea.appendChild(svg);
            chartArea.appendChild(labelContainer);
            container.appendChild(chartArea);
        };
        
        // Removed: renderVulnerableGroupsVisualization function (stacked bar chart is obsolete)


        // === RENDER ALL ELEMENTS ON LOAD ===
        
        // 2. Render KPI Cards
        const kpiMetrics = [
            { label: "Total Affected People", value: totals.people, icon: "üë§", color: "bg-secondary", text: "text-white" },
            { label: "Total Families", value: totals.families, icon: "üè†", color: "bg-accent", text: "text-gray-800" },
            { label: "Vulnerable: Infants", value: totals.infants, icon: "üë∂", color: "bg-vulnerable-infants", text: "text-white" },
            { label: "Vulnerable: Under 5", value: totals.under5, icon: "üßí", color: "bg-vulnerable-under5", text: "text-white" },
            { label: "Vulnerable: Pregnant Mothers", value: totals.pregnant, icon: "ü§∞", color: "bg-vulnerable-pregnant", text: "text-white" },
        ];
        
        const kpiContainer = document.getElementById('kpi-cards');
        kpiMetrics.forEach(metric => {
            const card = `
                <div class="${metric.color} ${metric.text} p-4 rounded-xl shadow-lg border border-gray-100 transform hover:shadow-xl transition duration-200">
                    <div class="text-4xl mb-2">${metric.icon}</div>
                    <p class="text-xs font-semibold uppercase opacity-80">${metric.label}</p>
                    <p class="text-3xl font-extrabold mt-1">${metric.value.toLocaleString()}</p>
                </div>
            `;
            kpiContainer.innerHTML += card;
        });

        // 3. Render all MOH Visualizations
        renderPieChart('moh-people-visualization', 'people', 'Affected Population (People)');
        renderGenderPieChart('gender-distribution'); 
        
        // NEW: Render three separate vulnerable group pie charts
        renderPieChart('vulnerable-infants-chart', 'infants', 'Infants');
        renderPieChart('vulnerable-under5-chart', 'under5', 'Children Under 5');
        renderPieChart('vulnerable-pregnant-chart', 'pregnant', 'Pregnant Mothers');


        // 4. Render Detailed Data Table
        const tableBody = document.getElementById('data-table-body');
        tableBody.innerHTML = ''; // Clear existing content
        disasterData.forEach((item, index) => {
            const rowClass = item.people > 0 ? (index % 2 === 0 ? 'bg-white hover:bg-gray-50' : 'bg-gray-50 hover:bg-gray-100') : 'bg-red-50/50 hover:bg-red-100'; // Highlight zero-population areas slightly
            const rowHtml = `
                <tr class="${rowClass} transition duration-150 ease-in-out">
                    <td class="px-3 py-3 whitespace-nowrap text-sm font-medium text-gray-900">${item.moh}</td>
                    <td class="px-3 py-3 whitespace-nowrap text-sm text-right font-semibold text-accent">${item.families.toLocaleString()}</td>
                    <td class="px-3 py-3 whitespace-nowrap text-sm text-right font-extrabold text-secondary">${item.people.toLocaleString()}</td>
                    <td class="px-3 py-3 whitespace-nowrap text-sm text-right hidden sm:table-cell">${item.male.toLocaleString()}</td>
                    <td class="px-3 py-3 whitespace-nowrap text-sm text-right hidden sm:table-cell">${item.female.toLocaleString()}</td>
                    <td class="px-3 py-3 whitespace-nowrap text-sm text-right font-medium bg-vulnerable-infants/10 text-vulnerable-infants">${item.infants.toLocaleString()}</td>
                    <td class="px-3 py-3 whitespace-nowrap text-sm text-right font-medium bg-vulnerable-under5/10 text-vulnerable-under5">${item.under5.toLocaleString()}</td>
                    <td class="px-3 py-3 whitespace-nowrap text-sm text-right font-medium bg-vulnerable-pregnant/10 text-vulnerable-pregnant">${item.pregnant.toLocaleString()}</td>
                </tr>
            `;
            tableBody.innerHTML += rowHtml;
        });

        // Render Table Footer (Totals)
        const tableFooter = document.getElementById('data-table-footer');
        tableFooter.innerHTML = ''; // Clear existing content
        const footerHtml = `
            <tr class="bg-gray-800 text-white font-bold text-base sticky bottom-0">
                <td class="px-3 py-3 whitespace-nowrap rounded-bl-xl">TOTALS</td>
                <td class="px-3 py-3 text-right">${totals.families.toLocaleString()}</td>
                <td class="px-3 py-3 text-right">${totals.people.toLocaleString()}</td>
                <td class="px-3 py-3 text-right hidden sm:table-cell">${totals.male.toLocaleString()}</td>
                <td class="px-3 py-3 text-right hidden sm:table-cell">${totals.female.toLocaleString()}</td>
                <td class="px-3 py-3 text-right bg-vulnerable-infants/90">${totals.infants.toLocaleString()}</td>
                <td class="px-3 py-3 text-right bg-vulnerable-under5/90">${totals.under5.toLocaleString()}</td>
                <td class="px-3 py-3 text-right bg-vulnerable-pregnant/90 rounded-br-xl">${totals.pregnant.toLocaleString()}</td>
            </tr>
        `;
        tableFooter.innerHTML += footerHtml;

    </script>
</body>
</html>
