<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Trincomalee District Disaster Response Dashboard</title>

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --brand:#0a53be;
  --bg:#f6f8ff;
  --muted:#6b7280;
  --green:#2ecc71;
  --orange:#f39c12;
  --red:#e74c3c;
  --card:#ffffff;
  --radius:14px;
}

body{
  margin:0;
  font-family:"Poppins", sans-serif;
  background:var(--bg);
  color:#222;
}

header{
  text-align:center;
  padding:25px 10px;
  background:linear-gradient(135deg,#0a53be,#1e90ff);
  color:white;
  border-bottom-left-radius:20px;
  border-bottom-right-radius:20px;
}

header h1{
  margin:0;
  font-size:25px;
  font-weight:600;
}

header p{
  margin:6px 0;
  font-size:14px;
}

.date-badge{
  background:white;
  color:var(--brand);
  padding:6px 14px;
  border-radius:20px;
  font-weight:700;
  display:inline-block;
  margin-top:8px;
}

.container{
  max-width:1200px;
  margin:auto;
  padding:16px;
}

.cards-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:12px;
  margin:18px 0 30px;
}

.moh-card{
  background:var(--card);
  padding:14px;
  border-radius:var(--radius);
  box-shadow:0 5px 14px rgba(0,0,0,0.06);
  border-left:7px solid;
  transition:0.2s;
}

.moh-card:hover{
  transform:translateY(-3px);
}

.moh-card h3{
  margin:0;
  font-size:17px;
  font-weight:700;
}

.moh-card p{
  margin:3px 0;
  font-size:13px;
}

.chart-card{
  background:var(--card);
  padding:15px;
  border-radius:var(--radius);
  box-shadow:0 5px 14px rgba(0,0,0,0.06);
  margin-bottom:25px;
}

.table-wrap{
  background:var(--card);
  padding:15px;
  border-radius:var(--radius);
  box-shadow:0 5px 14px rgba(0,0,0,0.06);
  overflow:auto;
}

table{
  width:100%;
  border-collapse:collapse;
  min-width:900px;
}

th, td{
  padding:10px;
  text-align:center;
  border-bottom:1px solid #e0e7ff;
  font-size:13px;
}

th{
  background:var(--brand);
  color:white;
  font-weight:600;
  position:sticky;
  top:0;
  z-index:1;
}

tr:nth-child(even){
  background:#f0f5ff;
}
</style>
</head>

<body>

<header>
  <h1>Trincomalee District Disaster Response Dashboard</h1>
  <p>Health Information Management Unit — Office of RDHS Trincomalee</p>
  <span class="date-badge">Data Snapshot: 3rd December 2025</span>
</header>

<div class="container">

  <!-- MOH Cards -->
  <div id="cardsGrid" class="cards-grid"></div>

  <!-- Single Bar Graph -->
  <div class="chart-card">
    <h3 style="margin:0 0 10px; font-size:18px; color:var(--brand); font-weight:700;">
      People Affected by MOH Area
    </h3>
    <canvas id="barChart" height="200"></canvas>
  </div>

  <!-- Table -->
  <div class="table-wrap">
    <h3 style="margin:0 0 10px; font-size:18px; color:var(--brand); font-weight:700;">
      Aggregated MOH Area Data
    </h3>
    <table>
      <thead>
        <tr>
          <th>MOH Area</th>
          <th>Families</th>
          <th>People</th>
          <th>Male</th>
          <th>Female</th>
          <th>Infants</th>
          <th>Under 5</th>
          <th>Pregnant</th>
          <th>Deaths</th>
          <th>Missing</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

</div>

<script>
/* Aggregated MOH data */
const mohData = [
  {name:"Kuchaveli",families:2,people:10,male:5,female:5,infants:0,under5:2,pregnant:0,deaths:0,missing:0},
  {name:"Gomarankadawela",families:10,people:0,male:0,female:0,infants:0,under5:0,pregnant:0,deaths:0,missing:0},
  {name:"Padavisripura",families:58,people:122,male:0,female:0,infants:0,under5:0,pregnant:0,deaths:0,missing:0},
  {name:"Uppuveli",families:5,people:26,male:10,female:14,infants:0,under5:0,pregnant:0,deaths:0,missing:0},
  {name:"Trincomalee",families:5,people:5,male:0,female:0,infants:0,under5:0,pregnant:0,deaths:0,missing:0},
  {name:"Kanthale",families:139,people:448,male:218,female:230,infants:2,under5:30,pregnant:2,deaths:0,missing:0},
  {name:"Kurunjakerni",families:299,people:1048,male:277,female:278,infants:6,under5:35,pregnant:5,deaths:0,missing:0},
  {name:"Seruwila",families:536,people:1564,male:739,female:825,infants:10,under5:88,pregnant:4,deaths:0,missing:0},
  {name:"Echilampathu",families:620,people:1795,male:518,female:555,infants:0,under5:25,pregnant:27,deaths:0,missing:0},
  {name:"Kinniya",families:398,people:1168,male:544,female:624,infants:23,under5:114,pregnant:11,deaths:0,missing:0},
  {name:"Muthur",families:3046,people:9348,male:4299,female:4563,infants:12,under5:743,pregnant:52,deaths:0,missing:0},
  {name:"Thambalagamam",families:0,people:0,male:0,female:0,infants:0,under5:0,pregnant:0,deaths:0,missing:0}
];

/* ---------- MOH CARDS ---------- */
function alertColor(p){
  if(p>2000) return "var(--red)";
  if(p>=1000) return "var(--orange)";
  return "var(--green)";
}

const cardsGrid = document.getElementById("cardsGrid");
mohData.forEach(m=>{
  const div=document.createElement("div");
  div.className="moh-card";
  div.style.borderLeftColor=alertColor(m.people);
  div.innerHTML = `
    <h3>${m.name}</h3>
    <p>Families: ${m.families}</p>
    <p>People: ${m.people}</p>
    <p>Male: ${m.male} • Female: ${m.female}</p>
    <p>Infants: ${m.infants} • Under 5: ${m.under5}</p>
    <p>Pregnant: ${m.pregnant}</p>
  `;
  cardsGrid.appendChild(div);
});

/* ---------- TABLE ---------- */
const tableBody=document.getElementById("tableBody");
mohData.forEach(m=>{
  const tr=document.createElement("tr");
  tr.innerHTML = `
    <td>${m.name}</td>
    <td>${m.families}</td>
    <td>${m.people}</td>
    <td>${m.male}</td>
    <td>${m.female}</td>
    <td>${m.infants}</td>
    <td>${m.under5}</td>
    <td>${m.pregnant}</td>
    <td>${m.deaths}</td>
    <td>${m.missing}</td>
  `;
  tableBody.appendChild(tr);
});

/* ---------- SINGLE BAR CHART ---------- */
const ctx = document.getElementById("barChart").getContext("2d");
new Chart(ctx,{
  type:"bar",
  data:{
    labels:mohData.map(m=>m.name),
    datasets:[{
      label:"People",
      data:mohData.map(m=>m.people),
      backgroundColor:mohData.map(m=>{
        let c=alertColor(m.people);
        if(c==="var(--green)") return "rgba(46,204,113,0.9)";
        if(c==="var(--orange)") return "rgba(243,156,18,0.9)";
        return "rgba(231,76,60,0.9)";
      }),
      borderRadius:8
    }]
  },
  options:{
    plugins:{legend:{display:false}},
    scales:{
      y:{beginAtZero:true}
    }
  }
});
</script>

</body>
</html>
